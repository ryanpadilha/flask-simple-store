{% extends "layout.html" %}
{% block content %}

<section class="content-header">
    <h1>&nbsp;</h1>
    <ol class="breadcrumb">
        <li><a href="{{ url_for('website.index') }}"><i class="fa fa-dashboard"></i> Home</a></li>
        <li>Configuração</li>
        <li class="active">Usuários</li>
    </ol>
</section>

<section class="content">
    {% include 'commons/messages.html' %}

    <div class="box box-primary">
        <div class="box-header with-border">
            <h3 class="box-title">Cadastro</h3>
            <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="Collapse"><i class="fa fa-minus"></i></button>
                <button type="button" class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip" title="Remove"><i class="fa fa-times"></i></button>
            </div>
        </div>

        <form role="form" method="POST" enctype="multipart/form-data" autocomplete="off">
        	<div class="box-body">
                <h4 style="background-color:#f7f7f7; font-size: 18px; font-weight: bold; text-align: center; padding: 7px 10px; margin-top: 0;">
                    Dados de Login
                </h4>
                <div class="row">
                    <div class="col-md-6">
                        <div {% if form.name.errors %} class="form-group has-error" {% else %} class="form-group" {% endif %}>
                            {{ form.name.label }}
                            {{ form.name(class_='form-control', autocomplete='nope') }}

                            {% for error in form.name.errors %}
                                <span class="help-block">{{ error }}</span>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div {% if form.user_email.errors %} class="form-group has-error" {% else %} class="form-group" {% endif %}>
                            {{ form.user_email.label }}
                            {{ form.user_email(class_='form-control', autocomplete='nope') }}

                            {% for error in form.user_email.errors %}
                                <span class="help-block">{{ error }}</span>
                            {% endfor %}
                        </div>
                    </div>
                </div>

                {% if request.endpoint.endswith('form_user') %}
                <div class="row">
                    <div class="col-md-6">
                        <div {% if form.user_password.errors %} class="form-group has-error" {% else %} class="form-group" {% endif %}>
                            {{ form.user_password.label }}
                            {{ form.user_password(class_='form-control', autocomplete='nope') }}

                            {% for error in form.user_password.errors %}
                                <span class="help-block">{{ error }}</span>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div {% if form.confirm_password.errors %} class="form-group has-error" {% else %} class="form-group" {% endif %}>
                            {{ form.confirm_password.label }}
                            {{ form.confirm_password(class_='form-control', autocomplete='nope') }}

                            {% for error in form.confirm_password.errors %}
                                <span class="help-block">{{ error }}</span>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                {% endif %}

                <div class="row">
                    <div class="col-md-6">
                        <div {% if form.roles.errors %} class="form-group has-error" {% else %} class="form-group" {% endif %}>
                            {{ form.roles.label }}
                            {{ form.roles(class_='form-control select2', multiple='multiple', autocomplete='nope') }}

                            {% for error in form.roles.errors %}
                                <span class="help-block">{{ error }}</span>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div {% if form.active.errors %} class="form-group has-error" {% else %} class="form-group" {% endif %}>
                            {{ form.active.label }}
                            {{ form.active(class_='form-control', autocomplete='nope') }}

                            {% for error in form.active.errors %}
                                <span class="help-block">{{ error }}</span>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                <h4 style="background-color:#f7f7f7; font-size: 18px; font-weight: bold; text-align: center; padding: 7px 10px; margin-top: 0;">
                    Dados Pessoais
                </h4>
                <div class="row">
                    <div class="col-md-6">
                        <div {% if form.document_main.errors %} class="form-group has-error" {% else %} class="form-group" {% endif %}>
                            {{ form.document_main.label }}
                            {{ form.document_main(id='document-main-cpf', class_='form-control', autocomplete='nope') }}

                            {% for error in form.document_main.errors %}
                                <span class="help-block">{{ error }}</span>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div {% if form.phone.errors %} class="form-group has-error" {% else %} class="form-group" {% endif %}>
                            {{ form.phone.label }}
                            {{ form.phone(id='phone-mobile', class_='form-control', autocomplete='nope') }}

                            {% for error in form.phone.errors %}
                                <span class="help-block">{{ error }}</span>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div {% if form.company.errors %} class="form-group has-error" {% else %} class="form-group" {% endif %}>
                            {{ form.company.label }}
                            {{ form.company(class_='form-control', autocomplete='nope') }}

                            {% for error in form.company.errors %}
                                <span class="help-block">{{ error }}</span>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div {% if form.occupation.errors %} class="form-group has-error" {% else %} class="form-group" {% endif %}>
                            {{ form.occupation.label }}
                            {{ form.occupation(class_='form-control', autocomplete='nope') }}


                            {% for error in form.occupation.errors %}
                                <span class="help-block">{{ error }}</span>
                            {% endfor %}
                        </div>
                    </div>
                </div>

                <div {% if form.photo.errors %} class="form-group has-error" {% else %} class="form-group" {% endif %}>
                    {{ form.photo.label }}
					{{ form.photo(class_='form-control', autocomplete='nope') }}

                    {% if file_url %}
                        Image armazenada: <a href="{{ file_url }}" target="_{{ file_name }}">{{ file_name }}</a>
                    {% endif %}

					{% for error in form.photo.errors %}
					    <span class="help-block">{{ error }}</span>
					{% endfor %}
                </div>
        	</div>
        	<div class="box-footer">
        		{{ form.hidden_tag() }}
                <button type="submit" class="btn btn-primary pull-right" style="width: 100px;">Salvar</button>
                <a href="{{ url_for('manage.list_users') }}">
                	<button type="button" class="btn btn-default pull-right" style="width: 100px; margin-right: 5px;">Voltar</button>
                </a>
            </div>
        </form>
    </div>
</section>
{% endblock %}